{{!--
  Copyright 2016, Yahoo Inc.
  Licensed under the terms of the Apache License, Version 2.0.
  See the LICENSE file associated with the project for terms.
 --}}
<div class="visual-controls">
  <button type="button" class="pivot-control {{if pivotMode "active"}}" {{action "togglePivot"}} disabled={{pivotMode}}>
    {{fa-icon "sliders"}}
    <EmberTooltip>Slice, dice and visualize your data</EmberTooltip>
  </button>
  {{#unless canOnlyPivot}}
    {{#if canShowPieChart}}
      <button type="button" class="chart-control pie-view {{if showPieChart "active"}}" {{action "changeChart" "showPieChart"}} disabled={{showPieChart}}>
        {{fa-icon "pie-chart"}}
        <EmberTooltip>Show as pie chart</EmberTooltip>
      </button>
    {{/if}}
    <button type="button" class="chart-control line-view {{if showLineChart "active"}}" {{action "changeChart" "showLineChart"}} disabled={{showLineChart}}>
      {{fa-icon "line-chart"}}
      <EmberTooltip>Show as line chart</EmberTooltip>
    </button>
    <button type="button" class="chart-control bar-view {{if showBarChart "active"}}" {{action "changeChart" "showBarChart"}} disabled={{showBarChart}}>
      {{fa-icon "bar-chart"}}
      <EmberTooltip @side="left">Show as bar chart</EmberTooltip>
    </button>
  {{/unless}}
</div>

<div class="visual-container">
  {{#if pivotMode}}
    <PivotTable @rows={{rows}} @columns={{columns}} @initialOptions={{pivotOptions}} @onRefresh={{action "saveOptions"}} />
  {{else if timeSeriesMode}}
    {{#if showLineChart}}
      <EmberChart @type="line" @animate={{false}} @data={{timeSeriesData}} @options={{timeSeriesOptions}} />
    {{else}}
      <EmberChart @type="bar" @animate={{false}} @data={{timeSeriesData}} @options={{timeSeriesOptions}} />
    {{/if}}
  {{else}}
    {{#if showPieChart}}
      <EmberChart @type="doughnut" @animate={{true}} @data={{regularData}} @options={{regularOptions}} />
    {{else if showLineChart}}
      <EmberChart @type="line" @animate={{true}} @data={{regularData}} @options={{regularOptions}} />
    {{else}}
      <EmberChart @type="bar" @animate={{true}} @data={{regularData}} @options={{regularOptions}} />
    {{/if}}
  {{/if}}
</div>
